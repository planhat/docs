<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://app.planhat.com'>Login to get your API Key</a></li>
            <li><a href='https://www.planhat.com'>Customer Success API from Planhat</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="other-end-points">Other end-points</h1>

<p>There are plenty of end-points to do pretty much anything you&rsquo;d like. Let us know what you need and will provide you with the relevant details.</p>

          <h1 id="introduction">Introduction</h1>

<p>Welcome to the Planhat API! It will help you interact with Planhat whenever you need something not covered by our standard integration.</p>

<p>The API has a few &ldquo;open&rdquo; end point that can be used to push data without the need to authenticate. This is ideal if all you need is to send some server side metrics,
user activities, call logs etc. If you need more that that your API keys will give you access to the full API which will let you do almost anything related to you data in Planhat.</p>

<p>There is a default limit of approximately 200 API calls / minute. Should you send more requests you&rsquo;ll receive a &ldquo;429 Too many requests&rdquo; response. The limit of 200 calls is reset every 60-120 seconds, and each response includes information about your limit and how many calls you have left until next reset.</p>

<p><code class="prettyprint">X-Rate-Limit-Limit: 200</code>
<code class="prettyprint">X-Rate-Limit-Remaining: 192</code></p>

<p>If you need more capacity let us know.</p>

<p>In addition to the API, you can upload data in xlsx-format in Planhat. We have prepared a couple of template for this, and you can read more about it <a href="https://www.planhat.com/get-started/">Here</a>.</p>

<h1 id="authentication">Authentication</h1>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl https://api.planhat.com/myprofile
  -H <span class="s2">"Authorization: Bearer [PERSONAL_ACCESS_TOKEN]"</span>
</code></pre>

<blockquote>
<p>Replace <code class="prettyprint">[PERSONAL_ACCESS_TOKEN]</code> with your API key.</p>
</blockquote>

<p>Most end-points require authentication by a Personal Access Token, managed from the Settings section in Planhat. Personal Access Tokens are static tokens created by you from within the App. Once a token is created, it will last forever. To disable access to a token, simply remove it.</p>

<p>Access tokens are personal, meaning that whatever automatic operation you perform with this token, will appear as if the user in question did it. Consider creating a separate API user and generate tokens for that user to keep things separated.</p>

<p>The Token should be placed in the Authorization header in ONE of the following ways:</p>

<p><code class="prettyprint">Authorization: Bearer [PERSONAL_ACCESS_TOKEN]</code></p>

<p>OR</p>

<p><code class="prettyprint">Authorization: Basic [base64encode(PERSONAL_ACCESS_TOKEN:)]</code></p>

<aside class="notice">
Note the colon after the token if you go with the Basic approach. Itâ€™s required even though there is no password.
</aside>

          <h1 id="companies">Companies</h1>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Google"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580549e00000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"coOwner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580549e00000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"externalId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"onboarding"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tags"</span><span class="p">:[</span><span class="s2">"Gold"</span><span class="p">,</span><span class="w"> </span><span class="s2">"East Coast"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"custom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"referenceOk"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Companies, sometimes referred to as &ldquo;Accounts&rdquo;, are your customers. It also covers companies that previously were your customer and potentially new customers (prospects).
Whatever the status of the company it&rsquo;s the same object and end-point.</p>

<p><code class="prettyprint">POST: https://api.planhat.com/companies</code></p>

<p><code class="prettyprint">GET: https://api.planhat.com/companies/:id</code></p>

<p><code class="prettyprint">PUT: https://api.planhat.com/companies/:id</code></p>

<p><code class="prettyprint">DELETE: https://api.planhat.com/companies/:id</code></p>

<h3 id="properties">Properties</h3>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name*</td>
<td>Name of the Customer.</td>
</tr>
<tr>
<td>slug</td>
<td>Provide a custom slug in case you plan on adding multiple customers with the exact same name. Could be our own customer id, or an increasing counter, anything as long as it&rsquo;s unique. If your customer names are unique then you don&rsquo;t have to provide this, Planhat will create one for you.</td>
</tr>
<tr>
<td>owner</td>
<td>The the planhat user id of the Account Manager / Success Manager to whom this customer belongs. See section [Team (Planhat Users)] below for info about how to get the user ids.</td>
</tr>
<tr>
<td>coOwner</td>
<td>A potential co-pilot, in case a single owner isn&rsquo;t enough. See section [Team (Planhat Users)] below for info about how to get the user ids.</td>
</tr>
<tr>
<td>externalId</td>
<td>The customer id in your own system (will help us match other data you send over such as user activities, custom metrics etc). Not strictly required but if you&rsquo;ve read this far it&rsquo;s most likely something you need.</td>
</tr>
<tr>
<td>phase</td>
<td>Each customer can be assigned a lifecycle phase in Planhat. It&rsquo;s a text string that should match the name of one of the phases in Planhat. If the name doesn&rsquo;t match any of the phases in Planhat it will still save.</td>
</tr>
<tr>
<td>tags</td>
<td>Array of strings to tag your customers. There is no separate end-point for tags so if you&rsquo;re going to update some of the tags for a given customer you&rsquo;d have to update the whole array.</td>
</tr>
<tr>
<td>custom</td>
<td>A flexible object with custom data, one level. Add any custom data points on the form. Use short and human friendly names as keys. For example &ldquo;Plan&rdquo; or &ldquo;Subscription Plan&rdquo; is better than &ldquo;SUBSCRIPTION_PLAN&rdquo;, as this is how it will be displayed in Planhat. Date, Strings, Boolean, Number are allowed types.</td>
</tr>
</tbody></table>

<h3 id="company-lookup">Company lookup</h3>

<p>When you need a lightweight list of all companies in Planhat to match against your own id&rsquo;s etc.</p>

<p><code class="prettyprint">GET: https://api.planhat.com/leancompanies?externalId=yourid123</code></p>

          <h1 id="team">Team</h1>

<p>If you would like to add the owner property while creating new companies and you have the user&rsquo;s email but not the planhat id, then this end-point will help:</p>

<p><code class="prettyprint">GET: https://api.planhat.com/users?email=yourcolleaguesname@yourcompany.com</code></p>

          <h1 id="contacts">Contacts</h1>

<p>These are people working at your customers, business contacts as well as your actual end users.</p>

<p><code class="prettyprint">POST:  https://api.planhat.com/endusers</code></p>

<p><code class="prettyprint">GET:  https://api.planhat.com/endusers/:id</code></p>

<p><code class="prettyprint">PUT:  https://api.planhat.com/endusers/:id</code></p>

<p><code class="prettyprint">DELETE:  https://api.planhat.com/endusers/:id</code></p>

<p>The GET request can be filtered to only list users at a specific company.</p>

<p><code class="prettyprint">/endusers?c=55242d576b8275de65f567e8</code></p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>companyId*</td>
<td>Planhat company id to decide which company profile a certain end-user belongs to.</td>
</tr>
<tr>
<td>companyName</td>
<td>Name of the company the user belongs to. Only used to display which company a certain user belongs to in the aggregated contact/end-user lists. There is no validation that this name actually matches the company name of the companyId provided. To link a user to a certain company profile, only the companyId parameter will be considered.</td>
</tr>
<tr>
<td>createDate</td>
<td>Date the contact was created, defaults to time of creation if not specified.</td>
</tr>
<tr>
<td>externalId</td>
<td>The user id in your own database, or some other external system</td>
</tr>
<tr>
<td>position</td>
<td>The role or position of this contact/user. e.g, &ldquo;CFO&rdquo;</td>
</tr>
<tr>
<td>phone</td>
<td>You pick the telephone number format, any string will do.</td>
</tr>
<tr>
<td>email</td>
<td>Email address of the user/contact</td>
</tr>
<tr>
<td>featured</td>
<td>Boolean marker to single out contacts of special importance, typically set this to true if this is a user your sales team sometimes speak with, have the phone number to etc. Set to false if this is &ldquo;just another user&rdquo;.</td>
</tr>
<tr>
<td>tags</td>
<td>Array of Strings to tag each contact</td>
</tr>
</tbody></table>

          <h1 id="calls">Calls</h1>
<pre class="highlight shell"><code><span class="c"># With the open end-point no auth required</span>
curl -X POST <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{"nr": "+4670123456", "externalUserId": "max123", "start": "2016-10-17T14:00:00.000Z", "end": "2016-10-17T14:02:00.000Z", "waiting": 10}'</span> <span class="se">\</span>
https://api.planhat.com/199627f7-0d65-52cd-89b9-45b5ff561bem/calls
</code></pre>

<blockquote>
<p>Remember to replace the sample tenant id above <code class="prettyprint">199627f7-0d65-52cd-89b9-45b5ff561bem</code> with your own.</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># You call also the authenticated end point to add calls</span>
curl -X POST <span class="se">\</span>
--user <span class="s2">"[PERSONAL_ACCESS_TOKEN]"</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{"nr": "+4670123456", "externalUserId": "max123", "start": "2016-10-17T14:00:00.000Z", "end": "2016-10-17T14:02:00.000Z", "waiting": 10}'</span> <span class="se">\</span>
https://api.planhat.com/calls
</code></pre>

<blockquote>
<p>Replace <code class="prettyprint">[PERSONAL_ACCESS_TOKEN]</code> with your API key.</p>
</blockquote>

<p>When you&rsquo;re looking for a custom connection of your VOIP/phone solution to Planhat this is the end point.</p>

<p><code class="prettyprint">POST:  https://api.planhat.com/calls</code></p>

<p><code class="prettyprint">POST:  https://api.planhat.com/[YOUR_TENANT_UUIS]/calls</code> (open, no auth header)</p>

<p><code class="prettyprint">GET:  https://api.planhat.com/calls/:id</code></p>

<p><code class="prettyprint">PUT:  https://api.planhat.com/calls/:id</code></p>

<p><code class="prettyprint">DELETE:  https://api.planhat.com/calls/:id</code></p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>nr*</td>
<td>Phone number of the contact you called, this will be used to match against customer and enduser in Planhat.</td>
</tr>
<tr>
<td>externalUserId*</td>
<td>UserId in your on system, used to find a matching &ldquo;agent&rdquo; / team member</td>
</tr>
<tr>
<td>start</td>
<td>When call started</td>
</tr>
<tr>
<td>end</td>
<td>When the call ended</td>
</tr>
<tr>
<td>waiting</td>
<td>In seconds, the waiting time before the &ldquo;talk&rdquo; started (waiting + talk_duration = end - start)</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
